{% extends "global/Page.html" %}

{% block custom_styles %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap');
  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css');

  body {
    font-family: 'Montserrat', sans-serif;
  }

  .statement-label {
  font-size: 0.7rem;
  line-height: 1.35;
  padding: 0.5rem 0.75rem;
}
  .statement-card {
  margin-bottom: 1rem;
}

  .scale-label {
  font-size: 0.7rem;
  line-height: 1.2;
  color: #6c757d;
  min-width: 160px;
}

</style>
{% endblock %}

{% block content %}
<div class="d-flex align-items-center mb-4 p-3 rounded bg-light border">
  <i class="fas fa-comment-dots me-3 text-primary" style="font-size:1.6rem;"></i>
  <div>
    <div class="text-muted small">Step 1</div>
    <h4 class="mb-0 fw-semibold">Give your opinions</h4>
  </div>
</div>

<p>
  Please indicate how much you agree or disagree with each statement using the sliders below.
  The scale runs from <strong>−10 (totally disagree)</strong> to
  <strong>10 (totally agree)</strong>, with <strong>0</strong> meaning neutral.
</p>

{% for field in form %}
  <div class="card shadow-sm statement-card">
    <div class="card-body">

      <label class="form-label d-block bg-light rounded statement-label">
        <strong>{{ field.label }}</strong>
      </label>

      <div class="d-flex align-items-center gap-3">
        <span class="scale-label">−10 (Completely disagree)</span>

        <input
          type="range"
          class="form-range flex-grow-1 opinion-slider"
          name="{{ field.name }}"
          id="id_{{ field.name }}"
          min="-10"
          max="10"
          step="1"
          value="0"
          oninput="document.getElementById('val_{{ field.name }}').textContent = this.value;"
        >

        <span class="badge bg-secondary" id="val_{{ field.name }}">0</span>

        <span class="scale-label text-end">10 (Completely agree)</span>

      </div>

    </div>
  </div>
{% endfor %}

<div class="text-center mt-4">
  {{ next_button }}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const nextBtn = document.querySelector('button.otree-btn-next');

    if (nextBtn) {
      nextBtn.addEventListener('click', function (event) {
        const confirmed = confirm('Are you sure you want to submit your answers?');
        if (!confirmed) {
          event.preventDefault();
        }
      });
    }
  });
</script>
{% endblock %}
